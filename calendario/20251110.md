---
exe-start: 35
exepro-start: 49
---

# Exercizes: functions



::: exefatti

Write a Python program that asks the user to input a word and a number. The program should then call a function that encodes the word using a Caesar cipher (i.e., shifting each letter by the number provided). The Caesar cipher should wrap around the alphabet (e.g., shifting "z" by 1 becomes "a") using only lowercase letters.


```python
ALPHALEN = 26   # ord('z') - ord('a')

def caesar_cipher(word, shift):
    result = ""
    for char in word:
        if 'a' <= char <= 'z':
            # Convert character to a number (0-25)
            char_num = ord(char) - ord('a')
            # Shift
            shifted_num = (char_num + shift) % ALPHALEN + ord('a')
            # Convert back to character
            shifted_char = chr(shifted_num)
            result += shifted_char
        else:
            # If character is not in the alphabet, leave it unchanged
            result += char
    return result

# Get input from the user
word = input("Enter a word (lowercase letters only): ")
number = int(input("Enter a number to shift by: "))

# Call the function and print the result
encoded = caesar_cipher(word, number)
print("Encoded word:", encoded)
```

[file](../codice/35.sub.caesarcipher.1.py)

Alternative solution (memorized alphabet)


```python
def caesar_cipher(word, shift):
    ALPHABET = "abcdefghijklmnopqrstuvwxyz"
    ALPHALEN = len(ALPHABET)
    result = ""

    for char in word:
        # Find the index of the character 
        i = 0
        while i < ALPHALEN and ALPHABET[i] != char:
            i += 1

        if i < ALPHALEN:
            # Apply the shift and wrap around
            shifted_i = (i + shift) % ALPHALEN
            result += ALPHABET[shifted_i]
        else:
            # If character is not in the alphabet, leave it unchanged
            result += char

    return result

# Get input from the user
word = input("Enter a word: ").lower()
number = int(input("Enter a number to shift by: "))

# Call the function and print the result
encoded = caesar_cipher(word, number)
print("Encoded word:", encoded)
```

[file](../codice/35.sub.caesarcipher.2.py)


:::



::: exefatti

Write a Python program to manage a basic structure for storing and analyzing hospital patient data. The program should allow the user to perform several actions related to patient records.

- **"insert"** – Add a new health metric (blood_pressure, glucose, …) for a patient.
- **"average"** – Compute the average of a specific metric for a patient.
- **"delete"** – Remove a patient from the dataset.
- **"risk"** – Evaluate if a patient is at risk based on inserted metrics.
- **"summary"** – Print all stored data for a patient.


```python
EXITMENU = "quit"

# Initialize the patient database
patients = {}

def insert_metric(patient_id, metric, value):
    if patient_id not in patients:
        patients[patient_id] = {}
    if metric not in patients[patient_id]:
        patients[patient_id][metric] = []
    patients[patient_id][metric].append(value)

def delete_patient(patient_id):
    if patient_id in patients:
        patients.pop(patient_id)
        return True
    return False

def compute_average(patient_id, metric):
    if patient_id in patients and metric in patients[patient_id]:
        values = patients[patient_id][metric]
        return sum(values) / len(values)
    return None

def print_summary(patient_id):
    if patient_id in patients:
        print(f"Data for patient {patient_id}:")
        for metric, values in patients[patient_id].items():
            print(f"  {metric}: {values}")
    else:
        print("Patient not found.")

def is_at_risk(patient_id):
    if patient_id not in patients:
        return None
    data = patients[patient_id]  # data is dict(metric: [values])
    risk_factors = []
    if "blood_pressure" in data and max(data["blood_pressure"]) > 140:
        return True
    if "glucose" in data and max(data["glucose"]) > 125:
        return True
    return False

# ------ MAIN SCRIPT --------

action = input("\nChoose action (insert, average, delete, risk, summary, quit): ").strip().lower()

while action != EXITMENU:     
    if action == "insert":
        in_input = input("Enter: <patientID, metric, value>").split(",").strip()
        pid = in_input[0].strip()
        metric = in_input[1].strip()
        value = float(in_input[2].strip())
        insert_metric(patient_id=pid, metric=metric, value=value)
    
    elif action == "delete":
        pid = input("Enter patientID to delete: ")
        delete_patient(pid)

    elif action == "average":
        in_input = input("Enter: <patientID, metric>").split(",").strip()
        pid = in_input[0].strip()
        metric = in_input[1].strip()
        avg = compute_average(pid,metric)
        if avg is not None:
            print(f"Average: {avg:.2f}")
        else:
            print("Patient or metric not found.")

    elif action == "summary":
        pid = input("Enter patientID: ").strip()
        print_summary(pid)

    elif action == "risk":
        pid = input("Enter patientID: ").strip()
        risk = is_at_risk(pid)
        if risk is None:
            print("Patient not found.")
        elif risk:
            print("Patient is at risk!")
        else:
            print("Patient is not at risk")        
    else:
        print("Invalid action. Try again.")

    action = input("\nChoose action (insert, average, delete, risk, summary, quit): ").strip().lower()
print("Exiting program.")

```

[file](../codice/36.sub.hospital.py)

:::


## Proposed Exercises


::: exepro

Write a Python program to **check if a player has won** a game of Tic Tac Toe.
A Tic Tac Toe board is represented as a **3×3 list of lists**, like this:

```
game = [
[1, 2, 0],
[2, 1, 0],
[2, 1, 1]
]
```

Each cell contains:
- 0 -> empty square
- 1 -> player 1's move
- 2 -> player 2's move

Write a function that, given a board configuration, checks **if any player has won**, and **which player** it is. A player wins if they have **three of their tokens in a row** (vertical, horizontal, diagonal).

You can assume that there is **at most one winner** per board and that you do **not** need to validate how the moves were made.

```python
def check_rows(board):
    for row in board:
        if row[0] != 0 and row[0] == row[1] and row[1] == row[2]:
            return row[0]
    return 0

def check_columns(board):
    for col in range(3):
        if board[0][col] != 0 and board[0][col] == board[1][col] and board[1][col] == board[2][col]:
            return board[0][col]
    return 0

def check_diagonals(board):
    # Top-left to bottom-right
    if board[0][0] != 0 and board[0][0] == board[1][1] and board[1][1] == board[2][2]:
        return board[0][0]
    # Top-right to bottom-left
    if board[0][2] != 0 and board[0][2] == board[1][1] and board[1][1] == board[2][0]:
        return board[0][2]
    return 0

def check_winner(board):
    winner = check_rows(board)
    if winner != 0:
        return winner
    winner = check_columns(board)
    if winner != 0:
        return winner
    winner = check_diagonals(board)
    return winner

# ---- MAIN SCRIPT --------

board = []
for i in range(3):
    row_input = input(f"Enter row {i + 1} (comma-separated): ")
    row = []
    for value in row_input.split(','):
        row.append(int(value.strip()))
    board.append(row)

# Examble board
# board = [
#     [1, 2, 0],
#     [2, 1, 0],
#     [2, 1, 1]
# ]

result = check_winner(board)
if result == 0:
    print("No winner.")
else:
    print(f"Player {result} wins!")
```

[file](../codice/90.sub.tictactoe.py)

:::


::: exepro

Write a program that asks the user to enter a sequence of temperatures in Celsius, separated by "," and converts it to Fahrenheit equivalents using the formula: (°C× 9/5) + 32. Use a subprogram to perform the conversion.

```python
def celsius_to_fahrenheit(c):
    return (c * 9 / 5) + 32
    
# --- MAIN SCRIPT ------

# Ask the user for input
input_str = input("Enter temperatures in Celsius, separated by commas: ")

# Split the input string into a list
celsius_values = input_str.split(",")

# Convert each value and print the result
print("Fahrenheit equivalents:")
for value in celsius_values:
    c = float(value)
    f = celsius_to_fahrenheit(c)
    print(f"{c}°C is {f}°F")

```

[file](../codice/90.sub.celsius2fahrenheit.py)

:::


